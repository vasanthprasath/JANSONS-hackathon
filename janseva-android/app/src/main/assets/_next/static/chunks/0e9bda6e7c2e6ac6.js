(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,68553,e=>{"use strict";let t=(0,e.i(75254).default)("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);e.s(["Camera",()=>t],68553)},84762,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(47163);let l=a.forwardRef(({className:e,...a},l)=>(0,t.jsx)("textarea",{className:(0,s.cn)("flex min-h-[80px] w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-slate-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:l,...a}));l.displayName="Textarea",e.s(["Textarea",()=>l])},10708,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(47163);let l=a.forwardRef(({className:e,...a},l)=>(0,t.jsx)("label",{ref:l,className:(0,s.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 text-slate-700",e),...a}));l.displayName="Label",e.s(["Label",()=>l])},23750,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(47163);let l=a.forwardRef(({className:e,type:a,...l},i)=>(0,t.jsx)("input",{type:a,className:(0,s.cn)("flex h-10 w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-slate-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#2563eb] focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:i,...l}));l.displayName="Input",e.s(["Input",()=>l])},31278,e=>{"use strict";let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},1759,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(18566),l=e.i(91432),i=e.i(67881),r=e.i(23750),o=e.i(10708),n=e.i(84762),d=e.i(31278),c=e.i(46897),u=e.i(68553),p=e.i(37727);function m(){let m=(0,s.useRouter)(),{user:h}=(0,l.useAuth)();(0,a.useEffect)(()=>{h&&"citizen"!==h.role&&m.push("/dashboard")},[h,m]);let[b,x]=(0,a.useState)(!1),[f,g]=(0,a.useState)(""),[v,j]=(0,a.useState)(null),[y,N]=(0,a.useState)("Local"),[k,w]=(0,a.useState)(""),[S,I]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{I(!0)},[]),(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:"New Complaint"}),(0,t.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Provide details about the issue you are facing."})]}),S?(0,t.jsxs)("form",{onSubmit:t=>{t.preventDefault(),x(!0);let a=12.9716,s=77.5946;try{if(f.includes(",")){let e=f.split(",");a=parseFloat(e[0].replace(/[^0-9.]/g,"")),s=parseFloat(e[1].replace(/[^0-9.]/g,""))}}catch(e){console.error("Loc parse error",e)}setTimeout(async()=>{let t,{saveComplaint:l}=await e.A(48764),i="CMP-"+Math.floor(1e5*Math.random());document.getElementById("category");let r=document.getElementById("description"),o=k,n=k,d=y;"Industrial"===y?(o="Industrial",n="Industrial",d="State",t=k):o="Local"===y&&["Roads & Potholes","Sanitation & Garbage","Water Supply","Electricity"].some(e=>k.includes(e))?k:k||"Other",l({id:i,title:"Industrial"===y?`Industrial Risk - ${k}`:`${y} - ${k} Issue`,description:r?r.value:"No description",category:o,status:"Submitted",lat:a,lng:s,date:new Date().toISOString(),image:v||void 0,govtLevel:d,department:n,industrialIssueType:t,timeline:[{status:"Submitted",date:new Date().toISOString(),completed:!0},{status:"In Progress",date:"",completed:!1},{status:"Resolved",date:"",completed:!1}]}),m.push(`/dashboard/track/${i}?new=true`)},1500)},className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.Label,{htmlFor:"scope",children:"Governance Level"}),(0,t.jsxs)("select",{id:"scope",className:"flex h-10 w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 dark:bg-slate-950 dark:border-slate-800 dark:text-slate-100 dark:ring-offset-slate-950 dark:focus-visible:ring-slate-300",required:!0,value:y,onChange:e=>{N(e.target.value),w("")},children:[(0,t.jsx)("option",{value:"Local",children:"Local / Municipal"}),(0,t.jsx)("option",{value:"State",children:"State Government"}),(0,t.jsx)("option",{value:"Central",children:"Central Government"}),(0,t.jsx)("option",{value:"Industrial",children:"Industrial Board"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.Label,{htmlFor:"department",children:"Department / Issue Type"}),(0,t.jsxs)("select",{id:"department",className:"flex h-10 w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 dark:bg-slate-950 dark:border-slate-800 dark:text-slate-100 dark:ring-offset-slate-950 dark:focus-visible:ring-slate-300",required:!0,value:k,onChange:e=>w(e.target.value),children:[(0,t.jsx)("option",{value:"",children:"Select Department"}),({Central:["Banking & Financial Services","Railway & Train Ticket Booking","Passport & Identity Services","National Transport & Highways"],State:["Land & Property Registration","Public Hospitals & Education","Public Restroom & Sanitation","Document / Paper Registration","State Transport Services"],Local:["Roads & Potholes","Sanitation & Garbage","Water Supply","Electricity","Public Restroom","Government Staff Complaints"],Industrial:["Factory Pollution (Air / Water / Noise)","Industrial Safety Risks","Factory Fire Hazards","Chemical Waste Disposal","Industrial Gas Leakage","Illegal Industrial Operations","Environmental Damage"]})[y].map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.Label,{htmlFor:"location",children:"Location"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(r.Input,{id:"location",placeholder:"Enter location or use GPS",value:f,onChange:e=>g(e.target.value),required:!0,className:"bg-white dark:bg-slate-950 dark:border-slate-800 dark:text-slate-100 placeholder:text-slate-400 dark:placeholder:text-slate-600"}),(0,t.jsx)(i.Button,{type:"button",variant:"outline",size:"icon",onClick:()=>{"geolocation"in navigator?navigator.geolocation.getCurrentPosition(e=>{let{latitude:t,longitude:a}=e.coords;g(`${t.toFixed(4)}\xb0 N, ${a.toFixed(4)}\xb0 E`)},e=>{console.error("Error getting location:",e),g("12.9716째 N, 77.5946째 E")}):g("12.9716째 N, 77.5946째 E")},children:(0,t.jsx)(c.MapPin,{className:"h-4 w-4"})})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.Label,{htmlFor:"description",children:"Description"}),(0,t.jsx)(n.Textarea,{id:"description",placeholder:"Describe the issue in detail...",className:"min-h-[120px] bg-white dark:bg-slate-950 dark:border-slate-800 dark:text-slate-100 placeholder:text-slate-400 dark:placeholder:text-slate-600",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.Label,{children:"Evidence (Optional)"}),v?(0,t.jsxs)("div",{className:"relative rounded-lg overflow-hidden h-40 border border-slate-200 dark:border-slate-700",children:[(0,t.jsx)("img",{src:v,alt:"Preview",className:"w-full h-full object-cover"}),(0,t.jsx)("button",{type:"button",onClick:()=>j(null),className:"absolute top-2 right-2 p-1 bg-black/50 rounded-full text-white hover:bg-black/70",children:(0,t.jsx)(p.X,{className:"h-4 w-4"})})]}):(0,t.jsx)("div",{className:"flex items-center justify-center w-full",children:(0,t.jsxs)("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-slate-300 dark:border-slate-700 border-dashed rounded-lg cursor-pointer bg-slate-50 dark:bg-slate-900/50 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[(0,t.jsx)(u.Camera,{className:"w-8 h-8 mb-2 text-slate-400"}),(0,t.jsx)("p",{className:"text-sm text-slate-500",children:"Click to upload photo"})]}),(0,t.jsx)("input",{type:"file",className:"hidden",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];t&&j(URL.createObjectURL(t))}})]})})]}),(0,t.jsxs)(i.Button,{type:"submit",className:"w-full h-11 text-lg",disabled:b,children:[b&&(0,t.jsx)(d.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Submit Complaint"]})]}):(0,t.jsx)("div",{className:"flex justify-center py-20",children:(0,t.jsx)(d.Loader2,{className:"h-8 w-8 animate-spin text-slate-300 dark:text-slate-600"})})]})}e.s(["default",()=>m])},48764,e=>{e.v(t=>Promise.all(["static/chunks/2d75012020b741be.js"].map(t=>e.l(t))).then(()=>t(69259)))}]);