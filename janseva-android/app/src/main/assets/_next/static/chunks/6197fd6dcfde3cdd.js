(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,94179,e=>{"use strict";var s=e.i(43476),t=e.i(47163);function a({className:e,variant:a="default",...l}){return(0,s.jsx)("div",{className:(0,t.cn)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-slate-950 focus:ring-offset-2",{default:"border-transparent bg-blue-600 text-white hover:bg-blue-600/80",secondary:"border-transparent bg-slate-100 text-slate-900 hover:bg-slate-100/80",destructive:"border-transparent bg-red-500 text-white hover:bg-red-500/80",outline:"text-slate-950",success:"border-transparent bg-green-500 text-white",warning:"border-transparent bg-amber-500 text-white"}[a],e),...l})}e.s(["Badge",()=>a])},63209,e=>{"use strict";let s=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>s],63209)},87413,78894,e=>{"use strict";var s=e.i(43476),t=e.i(94179),a=e.i(75254);let l=(0,a.default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>l],78894);var r=e.i(63209);let i=(0,a.default)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);function d({priority:e,size:a="default"}){if(!e)return null;let d="bg-slate-100 text-slate-700",n=(0,s.jsx)(i,{className:"h-3 w-3 mr-1"});switch(e){case"Emergency":d="bg-red-100 text-red-700 border-red-200 animate-pulse-slow",n=(0,s.jsx)(l,{className:"h-3 w-3 mr-1"});break;case"Moderate":d="bg-yellow-100 text-yellow-800 border-yellow-200",n=(0,s.jsx)(r.AlertCircle,{className:"h-3 w-3 mr-1"});break;case"Casual":d="bg-green-100 text-green-700 border-green-200",n=(0,s.jsx)(i,{className:"h-3 w-3 mr-1"})}return(0,s.jsxs)(t.Badge,{variant:"outline",className:`${d} ${"sm"===a?"px-1.5 py-0.5 text-[10px]":"px-2.5 py-0.5 text-xs"} font-medium border`,children:[n,e]})}e.s(["default",()=>d],87413)},95468,e=>{"use strict";let s=(0,e.i(75254).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>s],95468)},3116,e=>{"use strict";let s=(0,e.i(75254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>s],3116)},13147,72520,e=>{"use strict";var s=e.i(43476),t=e.i(91432),a=e.i(67881);let l=(0,e.i(75254).default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["ArrowRight",()=>l],72520);var r=e.i(22016),i=e.i(71645);function d({complaintId:e,status:d,className:n="",size:c="default",variant:o="default",fullWidth:x=!1}){let{user:m,isLoading:h}=(0,t.useAuth)(),[u,p]=(0,i.useState)(!1);if((0,i.useEffect)(()=>{p(!0)},[]),!u||h||!m)return null;let g=m.role;if("citizen"===g)return null;let b=d.toLowerCase(),f="",y="Manage";return("worker"===g?(f=`/dashboard/worker/${e}`,y=["in progress","in_progress"].includes(b)?"Finish Work":"submitted"===b?"View Assignment":"View Details"):["admin","municipal_officer","zonal_officer"].includes(g)&&(f=`/dashboard/authority/resolve/${e}`,y=["work completed","work_completed"].includes(b)?"Verify Work":"submitted"===b?"Assign Worker":"Manage Content"),f)?(0,s.jsx)(r.default,{href:f,className:x?"w-full":"",children:(0,s.jsxs)(a.Button,{size:c,variant:o,className:`${n} ${x?"w-full":""}`,children:[y," ",(0,s.jsx)(l,{className:"ml-2 h-4 w-4"})]})}):null}e.s(["default",()=>d],13147)},69532,e=>{"use strict";var s=e.i(43476),t=e.i(91432),a=e.i(47163),l=e.i(70065),r=e.i(94179),i=e.i(46897),d=e.i(63209),n=e.i(3116),c=e.i(18566),o=e.i(71645),x=e.i(75254);let m=(0,x.default)("brain-circuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]),h=(0,x.default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);var u=e.i(78894),p=e.i(95468);function g({resolvedComplaints:e}){let t=e.reduce((e,s)=>e+(s.resolutionTime||0),0)/(e.length||1),a=e.filter(e=>e.resolutionTime&&e.resolutionTime>48||e.rating&&e.rating<3);return(0,s.jsxs)(l.Card,{className:"bg-slate-900 text-white border-0 shadow-xl overflow-hidden relative",children:[(0,s.jsx)("div",{className:"absolute -top-10 -right-10 w-32 h-32 bg-blue-500/20 rounded-full blur-3xl"}),(0,s.jsxs)(l.CardHeader,{className:"pb-2 relative z-10 flex flex-row items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(m,{className:"h-5 w-5 text-blue-400"}),(0,s.jsx)(l.CardTitle,{className:"text-sm font-semibold tracking-wide",children:"AI PERFORMANCE INSIGHTS"})]}),(0,s.jsx)(r.Badge,{variant:"outline",className:"text-[10px] border-blue-500/30 text-blue-300",children:"BETA"})]}),(0,s.jsxs)(l.CardContent,{className:"space-y-4 relative z-10",children:[(0,s.jsx)("div",{className:"bg-slate-800/50 p-3 rounded-lg border border-slate-700/50",children:(0,s.jsxs)("p",{className:"text-xs text-slate-300 leading-relaxed",children:[(0,s.jsx)("span",{className:"text-blue-400 font-semibold",children:"Analysis: "}),0===e.length?"Not enough data for AI analysis.":a.length>0?`Detected ${a.length} assignments requiring process review due to delays.`:"Performance is optimal. Resolution times are within expected SLA."]})}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-1 p-2 bg-slate-800/30 rounded",children:[(0,s.jsx)("span",{className:"text-[10px] text-slate-400 uppercase",children:"Avg Resolution"}),(0,s.jsxs)("div",{className:"flex items-end gap-1",children:[(0,s.jsxs)("span",{className:"text-xl font-bold text-white",children:[t.toFixed(1),"h"]}),e.length>0&&(0,s.jsxs)("span",{className:"text-[10px] text-green-400 mb-1 flex items-center",children:[(0,s.jsx)(h,{className:"h-2 w-2 mr-0.5"})," Optimal"]})]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-1 p-2 bg-slate-800/30 rounded",children:[(0,s.jsx)("span",{className:"text-[10px] text-slate-400 uppercase",children:"Risk Level"}),(0,s.jsx)("div",{className:"flex items-center gap-2 mt-1",children:a.length>1?(0,s.jsx)(r.Badge,{className:"bg-red-500/20 text-red-300 border-0 hover:bg-red-500/30",children:"High"}):(0,s.jsx)(r.Badge,{className:"bg-green-500/20 text-green-300 border-0 hover:bg-green-500/30",children:"Low"})})]})]}),e.length>0&&(0,s.jsxs)("div",{className:"pt-2 border-t border-slate-700/50",children:[(0,s.jsx)("h4",{className:"text-[10px] font-semibold text-slate-400 mb-2 uppercase",children:"Recent Patterns"}),(0,s.jsx)("div",{className:"space-y-2",children:a.length>0?(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs text-amber-300",children:[(0,s.jsx)(u.AlertTriangle,{className:"h-3 w-3"}),(0,s.jsxs)("span",{children:["Recurring delays detected in ",a.length," cases."]})]}):(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs text-slate-300",children:[(0,s.jsx)(p.CheckCircle2,{className:"h-3 w-3 text-green-500"}),(0,s.jsx)("span",{children:"No significant anomalies detected."})]})})]})]})]})}var b=e.i(13147),f=e.i(87413);function y(){let{user:x}=(0,t.useAuth)(),m=(0,c.useRouter)(),[h,u]=(0,o.useState)([]),[p,y]=(0,o.useState)([]),[j,N]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{e.A(48764).then(({checkOverdueComplaints:e})=>{e()})},[]),(0,o.useEffect)(()=>{x&&!["municipal_officer","zonal_officer","admin"].includes(x.role)?m.push("/dashboard"):e.A(48764).then(({getComplaints:e})=>{let s=e();u(s.filter(e=>["Submitted","In Progress","Delayed","Work Completed"].includes(e.status)).map(e=>{let s=new Date(e.date),t=Math.abs(new Date().getTime()-s.getTime())/36e5;return{id:e.id,title:e.title,status:e.status,category:e.category,lat:e.lat,lng:e.lng,description:e.description,timeElapsed:`${Math.floor(t)} hours`,isDelayed:t>48,isVerificationNeeded:"Work Completed"===e.status,priority:e.priorityType}})),y(s.filter(e=>"Resolved"===e.status).map((e,s)=>({id:e.id,description:e.description,resolutionTime:e.resolutionTime||24,status:e.status,rating:e.rating||5}))),N(!1)})},[x,m]),(0,s.jsxs)("div",{className:"min-h-screen bg-slate-50 pb-20 p-4 space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-xl font-bold text-slate-900",children:"Authority Panel"}),(0,s.jsx)("p",{className:"text-xs text-slate-500",children:"Resolve assigned grievances"})]}),(0,s.jsx)(r.Badge,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:"Official"})]}),(0,s.jsx)("div",{className:"animate-in fade-in slide-in-from-top-4 duration-500",children:(0,s.jsx)(g,{resolvedComplaints:p})}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("h2",{className:"text-sm font-semibold text-slate-700 flex items-center gap-2",children:["Pending Assignments",(0,s.jsx)(r.Badge,{className:"bg-slate-200 text-slate-700 hover:bg-slate-300 h-5 px-1.5 rounded-full text-[10px]",children:h.length})]}),(0,s.jsxs)("div",{className:"grid gap-3",children:[h.sort((e,s)=>s.isVerificationNeeded?1:-1).map(e=>(0,s.jsx)(l.Card,{className:(0,a.cn)("group overflow-hidden border-slate-200 transition-all hover:shadow-md",e.isVerificationNeeded?"border-l-4 border-l-purple-500 bg-purple-50/10":e.isDelayed?"border-l-4 border-l-red-500 bg-red-50/10":"hover:border-slate-300"),children:(0,s.jsxs)(l.CardContent,{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,s.jsxs)("div",{className:"flex gap-2 items-center flex-wrap",children:[(0,s.jsx)(r.Badge,{variant:"secondary",className:"text-[10px] bg-white border border-slate-200 shadow-sm",children:e.category}),(0,s.jsx)(f.default,{priority:e.priority,size:"sm"}),e.isDelayed&&(0,s.jsxs)(r.Badge,{variant:"destructive",className:"text-[10px] h-5 px-1.5 flex items-center gap-1 animate-pulse",children:[(0,s.jsx)(n.Clock,{className:"h-3 w-3"})," Delayed (+",parseInt(e.timeElapsed),"h)"]}),e.isVerificationNeeded&&(0,s.jsxs)(r.Badge,{className:"text-[10px] h-5 px-1.5 flex items-center gap-1 bg-purple-100 text-purple-700 border border-purple-200 shadow-sm",children:[(0,s.jsx)(d.AlertCircle,{className:"h-3 w-3"})," Verify Work"]})]}),(0,s.jsx)(r.Badge,{className:"Work Completed"===e.status?"bg-purple-100 text-purple-700 hover:bg-purple-200":"In Progress"===e.status?"bg-blue-100 text-blue-700 hover:bg-blue-200":"bg-amber-100 text-amber-700 hover:bg-amber-200",children:e.status})]}),(0,s.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"font-semibold text-sm text-slate-900 group-hover:text-blue-700 transition-colors",children:e.title}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-1 mb-3 line-clamp-2",children:e.description}),(0,s.jsxs)("div",{className:"flex items-center text-xs text-slate-400 gap-3",children:[(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsx)(i.MapPin,{className:"mr-1 h-3 w-3"})," 0.8 km"]}),(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsx)(n.Clock,{className:"mr-1 h-3 w-3"})," ",e.timeElapsed]})]})]}),(0,s.jsx)("div",{className:"flex items-end",children:(0,s.jsx)(b.default,{complaintId:e.id,status:e.status,size:"sm",className:"h-8 text-xs bg-slate-900 text-white hover:bg-slate-800 shadow-md"})})]})]})},e.id)),0===h.length&&(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 text-center border-2 border-dashed border-slate-200 rounded-xl bg-slate-50/50",children:[(0,s.jsx)("div",{className:"h-12 w-12 rounded-full bg-slate-100 flex items-center justify-center mb-3",children:(0,s.jsx)(d.AlertCircle,{className:"h-6 w-6 text-slate-400"})}),(0,s.jsx)("h3",{className:"text-sm font-semibold text-slate-900",children:"All caught up!"}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-1 max-w-[200px]",children:"No pending grievances assigned to your zone."})]})]})]})]})}e.s(["default",()=>y],69532)},48764,e=>{e.v(s=>Promise.all(["static/chunks/2d75012020b741be.js"].map(s=>e.l(s))).then(()=>s(69259)))}]);