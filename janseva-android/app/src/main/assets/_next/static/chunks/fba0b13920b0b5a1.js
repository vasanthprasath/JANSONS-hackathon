(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,94179,e=>{"use strict";var s=e.i(43476),t=e.i(47163);function a({className:e,variant:a="default",...l}){return(0,s.jsx)("div",{className:(0,t.cn)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-slate-950 focus:ring-offset-2",{default:"border-transparent bg-blue-600 text-white hover:bg-blue-600/80",secondary:"border-transparent bg-slate-100 text-slate-900 hover:bg-slate-100/80",destructive:"border-transparent bg-red-500 text-white hover:bg-red-500/80",outline:"text-slate-950",success:"border-transparent bg-green-500 text-white",warning:"border-transparent bg-amber-500 text-white"}[a],e),...l})}e.s(["Badge",()=>a])},63209,e=>{"use strict";let s=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>s],63209)},87413,78894,e=>{"use strict";var s=e.i(43476),t=e.i(94179),a=e.i(75254);let l=(0,a.default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>l],78894);var r=e.i(63209);let i=(0,a.default)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);function n({priority:e,size:a="default"}){if(!e)return null;let n="bg-slate-100 text-slate-700",c=(0,s.jsx)(i,{className:"h-3 w-3 mr-1"});switch(e){case"Emergency":n="bg-red-100 text-red-700 border-red-200 animate-pulse-slow",c=(0,s.jsx)(l,{className:"h-3 w-3 mr-1"});break;case"Moderate":n="bg-yellow-100 text-yellow-800 border-yellow-200",c=(0,s.jsx)(r.AlertCircle,{className:"h-3 w-3 mr-1"});break;case"Casual":n="bg-green-100 text-green-700 border-green-200",c=(0,s.jsx)(i,{className:"h-3 w-3 mr-1"})}return(0,s.jsxs)(t.Badge,{variant:"outline",className:`${n} ${"sm"===a?"px-1.5 py-0.5 text-[10px]":"px-2.5 py-0.5 text-xs"} font-medium border`,children:[c,e]})}e.s(["default",()=>n],87413)},10708,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(47163);let l=t.forwardRef(({className:e,...t},l)=>(0,s.jsx)("label",{ref:l,className:(0,a.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 text-slate-700",e),...t}));l.displayName="Label",e.s(["Label",()=>l])},23750,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(47163);let l=t.forwardRef(({className:e,type:t,...l},r)=>(0,s.jsx)("input",{type:t,className:(0,a.cn)("flex h-10 w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-slate-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#2563eb] focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...l}));l.displayName="Input",e.s(["Input",()=>l])},13147,72520,e=>{"use strict";var s=e.i(43476),t=e.i(91432),a=e.i(67881);let l=(0,e.i(75254).default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["ArrowRight",()=>l],72520);var r=e.i(22016),i=e.i(71645);function n({complaintId:e,status:n,className:c="",size:d="default",variant:o="default",fullWidth:u=!1}){let{user:m,isLoading:x}=(0,t.useAuth)(),[h,f]=(0,i.useState)(!1);if((0,i.useEffect)(()=>{f(!0)},[]),!h||x||!m)return null;let p=m.role;if("citizen"===p)return null;let b=n.toLowerCase(),g="",v="Manage";return("worker"===p?(g=`/dashboard/worker/${e}`,v=["in progress","in_progress"].includes(b)?"Finish Work":"submitted"===b?"View Assignment":"View Details"):["admin","municipal_officer","zonal_officer"].includes(p)&&(g=`/dashboard/authority/resolve/${e}`,v=["work completed","work_completed"].includes(b)?"Verify Work":"submitted"===b?"Assign Worker":"Manage Content"),g)?(0,s.jsx)(r.default,{href:g,className:u?"w-full":"",children:(0,s.jsxs)(a.Button,{size:d,variant:o,className:`${c} ${u?"w-full":""}`,children:[v," ",(0,s.jsx)(l,{className:"ml-2 h-4 w-4"})]})}):null}e.s(["default",()=>n],13147)},84762,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(47163);let l=t.forwardRef(({className:e,...t},l)=>(0,s.jsx)("textarea",{className:(0,a.cn)("flex min-h-[80px] w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-slate-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:l,...t}));l.displayName="Textarea",e.s(["Textarea",()=>l])},61607,e=>{"use strict";var s=e.i(43476),t=e.i(22016),a=e.i(71645),l=e.i(94179),r=e.i(70065),i=e.i(75254);let n=(0,i.default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),c=(0,i.default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);var d=e.i(23750),o=e.i(67881),u=e.i(13147),m=e.i(87413),x=e.i(10708),h=e.i(84762),f=e.i(78894);let p=(0,i.default)("flag",[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]]);var b=e.i(37727);function g({complaintId:e,onReportSubmit:t}){let[l,r]=(0,a.useState)(!1),[i,n]=(0,a.useState)("incomplete"),[c,d]=(0,a.useState)("");return l?(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-red-600 flex items-center gap-2",children:[(0,s.jsx)(f.AlertTriangle,{className:"h-5 w-5"})," Report Grievance"]}),(0,s.jsx)(o.Button,{variant:"ghost",size:"icon",onClick:()=>r(!1),className:"h-8 w-8",children:(0,s.jsx)(b.X,{className:"h-4 w-4"})})]}),(0,s.jsxs)("div",{className:"p-4 space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(x.Label,{children:"Reason for reporting"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{type:"radio",id:"fake",name:"reason",value:"fake",checked:"fake"===i,onChange:e=>n(e.target.value),className:"accent-red-600"}),(0,s.jsx)(x.Label,{htmlFor:"fake",className:"font-normal cursor-pointer",children:"Fake Completion (Work not done)"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{type:"radio",id:"incomplete",name:"reason",value:"incomplete",checked:"incomplete"===i,onChange:e=>n(e.target.value),className:"accent-red-600"}),(0,s.jsx)(x.Label,{htmlFor:"incomplete",className:"font-normal cursor-pointer",children:"Incomplete / Poor Quality"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{type:"radio",id:"location",name:"reason",value:"location",checked:"location"===i,onChange:e=>n(e.target.value),className:"accent-red-600"}),(0,s.jsx)(x.Label,{htmlFor:"location",className:"font-normal cursor-pointer",children:"Wrong Location / Proof Mismatch"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.Label,{children:"Additional Details"}),(0,s.jsx)(h.Textarea,{placeholder:"Please describe why you are reporting this...",value:c,onChange:e=>d(e.target.value),className:"bg-slate-50"})]})]}),(0,s.jsxs)("div",{className:"p-4 bg-slate-50 flex justify-end gap-2",children:[(0,s.jsx)(o.Button,{variant:"ghost",onClick:()=>r(!1),children:"Cancel"}),(0,s.jsx)(o.Button,{variant:"destructive",onClick:()=>{t(i,c),r(!1)},children:"Submit Report"})]})]})}):(0,s.jsxs)(o.Button,{variant:"outline",className:"w-full text-red-600 border-red-200 hover:bg-red-50",onClick:()=>r(!0),children:[(0,s.jsx)(p,{className:"mr-2 h-4 w-4"})," Report Issue / Fake Work"]})}function v(){let[i,x]=(0,a.useState)([]),[h,f]=(0,a.useState)(!0),p=()=>{e.A(48764).then(({getComplaints:e})=>{x(e().map(e=>({id:e.id,title:e.title,status:e.status,category:e.category,priority:e.priorityType,date:new Date(e.date).toLocaleDateString()}))),f(!1)})};(0,a.useEffect)(()=>{p()},[]);let b=async(s,t,a)=>{let{updateComplaintStatus:l}=await e.A(48764);await l(s,"In Progress",{verificationStatus:"Rejected",workerRemarks:`[CITIZEN REPORT: ${t}] ${a}`}),p()};return(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:"Your Activity"}),(0,s.jsx)("p",{className:"text-sm text-slate-500",children:"Track the status of your reported grievances."})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)(n,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-slate-500"}),(0,s.jsx)(d.Input,{placeholder:"Search complaints...",className:"pl-9 bg-white"})]}),(0,s.jsx)(o.Button,{variant:"outline",size:"icon",children:(0,s.jsx)(c,{className:"h-4 w-4"})})]}),(0,s.jsx)("div",{className:"space-y-3",children:h?(0,s.jsx)("div",{className:"text-center py-10 text-slate-400 text-sm",children:"Loading..."}):i.length>0?i.map(e=>(0,s.jsx)(r.Card,{className:"overflow-hidden border-slate-100 shadow-sm hover:shadow-md transition-shadow mb-3",children:(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(l.Badge,{variant:"outline",className:"text-[10px] text-slate-500 border-slate-200",children:e.category}),(0,s.jsx)(m.default,{priority:e.priority,size:"sm"})]}),(0,s.jsx)(l.Badge,{variant:"Resolved"===e.status?"success":"In Progress"===e.status?"default":"Delayed"===e.status?"destructive":"secondary",className:"text-[10px]",children:"Work Completed"===e.status?"Work completed, under verification":e.status})]}),(0,s.jsx)(t.default,{href:`/dashboard/track/${e.id}`,className:"block",children:(0,s.jsx)("h4",{className:"font-semibold text-slate-900 mb-1 hover:text-blue-600",children:e.title})}),(0,s.jsxs)("div",{className:"flex justify-between items-end mt-2",children:[(0,s.jsxs)("div",{className:"text-xs text-slate-500",children:[(0,s.jsxs)("div",{className:"mb-0.5",children:["ID: ",e.id]}),(0,s.jsx)("div",{children:e.date})]}),(0,s.jsxs)("div",{className:"flex gap-2 w-full sm:w-auto",children:[(0,s.jsx)(u.default,{complaintId:e.id,status:e.status,size:"sm",className:"h-7 text-xs"}),"Work Completed"===e.status&&(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(g,{complaintId:e.id,onReportSubmit:(s,t)=>b(e.id,s,t)})})]})]})]})},e.id)):(0,s.jsxs)("div",{className:"text-center py-12 bg-slate-50 rounded-lg border border-dashed border-slate-200",children:[(0,s.jsx)("p",{className:"text-slate-500",children:"No grievances reported yet."}),(0,s.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:"Your submissions will appear here."})]})})]})}e.s(["default",()=>v],61607)},48764,e=>{e.v(s=>Promise.all(["static/chunks/2d75012020b741be.js"].map(s=>e.l(s))).then(()=>s(69259)))}]);